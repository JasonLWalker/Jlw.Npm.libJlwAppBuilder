/* Jlw App Builder Library 1.0.29
* Â© Jason L Walker 
* Build time: 04-28-2023 16:32:44
*/
function libJlwAppBuilder(t,a,e,n,i,o,r,s,l){n=n||window.libJlwUtility,i=i||window.jQuery,o=o||window.moment,r=r||window.tinyMCE,s=s||window.bootbox,l=l||window.toastr;var d=new n({},i),c=[],u=[];return d.aDtRenderers=[],d.frmEdit=" ",d.frmDisplay=" ",d.sUrlRoot=t,d.sDtSelector=a,d.getButtonDefinition=function(t,e,n,a,o){return{label:"string"==typeof t?t:" ",class:e||"",icon:n||"",skin:a||"btn-outline-secondary",callback:"function"==typeof o?o:d.fnNull}},d.getParentData=function(t){var t=i(t).parent(),n={};return i("span.d-none",t).each(function(t,e){e=i(e),n[e.data("name")]=e.html()}),n},d.onShowRecord=function(t,n){d.showPleaseWait();t=d.getParentData(t);t.EditToken="Show",d.post(d.sUrlRoot+"Data",t,function(e){d.hidePleaseWait(),window.setTimeout(function(){var t=d.showDialog(e,d.frmDisplay,"View Record");"function"==typeof n&&n(t,e)},10)})},d.onAddRecord=function(e){window.setTimeout(function(){var t=d.showDialog({},d.frmEdit,"Add Record",{yes:{label:'<div class="text-left"><i class="fas fa-check-circle"></i> Add Record</div>',className:"btn btn-outline-success pull-left jlw-update",callback:function(){return d.onSaveNew(t)}}});"function"==typeof e&&e(t,{})},10)},d.onEditRecord=function(t,e){var t=d.getParentData(t),n=(d.showPleaseWait(),t.EditToken="Edit",null);function a(t){return d.onSave(n)}d.post(d.sUrlRoot+"Data",t,function(t){d.hidePleaseWait(),window.setTimeout(function(){n=d.showDialog(t,d.frmEdit,"Edit Record",{yes:{label:'<div class="text-left"><i class="fas fa-check-circle"></i> Save Changes</div>',className:"btn btn-outline-success pull-left jlw-update",callback:a}}),"function"==typeof e&&e(n,t)},10)})},d.onDeleteRecord=function(t){var e=d.getParentData(t);function n(t){return!0}e.EditToken="Edit";t=s.confirm("Are you sure you want to delete this record?",function(t){t&&(d.showPleaseWait(),d.post(d.sUrlRoot+"Delete",e,n).always(d.redrawTable))});d.setModalOnTop(t)},d.showDialog=function(t,e,n,a){function o(t){d.destroyWysiwyg(i(t.delegateTarget))}a=a||{};a.no||(a.no={label:'<div class="text-left"><i class="fas fa-arrow-left"></i> Close</div>',className:"btn btn-outline-danger",callback:o});n=s.dialog({title:n,message:e,onEscape:o,size:"large",buttons:a});return d.populateFormData(t,n),i(".modal-lg",n).addClass("modal-xl"),d.setModalOnTop(n),n.data("parentLib",d),d.initWysiwyg(n),n},d.onSave=function(e){return d.showPleaseWait("Saving Data..."),d.post(d.sUrlRoot+"Save",d.serializeFormToJson(e),function(t){if(d.hidePleaseWait(),t.MessageType!=d.messageTypes.Success)return!1;d.destroyWysiwyg(e),e.modal("hide")}).always(d.redrawTable),!1},d.onSaveNew=function(e){return d.showPleaseWait("Saving Data..."),d.post(d.sUrlRoot+"Save",d.serializeFormToJson(e),function(t){if(d.hidePleaseWait(),t.MessageType!=d.messageTypes.Success)return!1;d.destroyWysiwyg(e),e.modal("hide")}).always(d.redrawTable),!1},d.dt=null,d.addDtRowButton=function(t,e,n,a,o){c.push(d.getButtonDefinition(t,e,n,a,o))},d.addDtFooterButton=function(t,e,n,a,o){u.push(d.getButtonDefinition(t,e,n,a,o))},d.addDtRenderer=function(t,e){d.aDtRenderers.push({render:t,targets:e})},d.dtOrder=[[0,"asc"]],d.initializeDataTable=function(t,e){t=t||d.sDtSelector;i.fn.DataTable.isDataTable(t)&&i(t).DataTable().destroy();var n={processing:!0,serverSide:!0,pageLength:10,order:d.dtOrder,preDrawCallback:d.dtOnPreDraw,ajax:{url:d.sUrlRoot+"DtList",type:"POST",data:d.fnPostDtAjaxData},columnDefs:d.aDtRenderers};e&&i.extend(n,e);return d.dt=i(t).DataTable(n).on("draw.dt",d.dtOnDraw)},d.fnNull=d.fnNull||function(){},d.fnPostDtAjaxData=d.fnPostDtAjaxData||d.fnNull,d.fnNotImplemented=function(){l.error("Not Implemented","This feature has not yet been implemented.")},d.dtRenderDate=function(t,e,n){return o(t).format("MM/DD/YYYY")},d.dtRenderButtons=function(t,e,n){var a,o,i="";for(a in i+='<div class="text-center">',n)i+='<span class="d-none" data-name="'+a+'">'+n[a]+"</span>";for(o in c)i+=d.getButton(c[o]);return i+="</div>"},d.dtRenderFooterButtons=function(){var t,e=i(a).parent().parent().parent();d&&d.dt&&d.dt.containers&&(e=i(d.dt.containers()));for(t in u){var n=i(d.getButton(u[t])).on("click",f(u[t]));e.append(n)}},d.dtOnDraw=function(t){for(var e in c){var e=c[e],n="."+e.class;i(n,i(a)).off().on("click",f(e))}},d.dtOnPreDraw=d.dtOnPreDraw||d.fnNull,d.getButton=function(t){return'<button type="button" class="btn btn-sm '+t.skin+" "+t.class+'"><span class="'+t.icon+'"></span>'+t.label+"</button>"},d.initPopup=function(t,e){var n=t.parent().parent();i(".jlw-popup-control button, .jlw-popup-control input[type=text]",i(n)).off().on("click",function(t){e(this,n)})},d.initWysiwyg=function(t){{var e;r&&(e={selector:".modal-body textarea.jlw-wysiwyg",init_instance_callback:function(t){i(t.targetElm).data("jlwWysiwyg",t)},setup:function(t){t.on("change",function(){r.triggerSave()})}},d.optionsWysiwyg&&i.extend(e,d.optionsWysiwyg),d.destroyWysiwyg(t),r.init(e))}},d.destroyWysiwyg=function(t){r&&i(".jlw-wysiwyg",t).each(function(){var t=i(this).data("jlwWysiwyg");t&&t.destroy&&t.destroy()})},d.optionsWysiwyg={},d.parentLib=e,d.redrawType="full-hold",d.redrawTable=function(){d.hidePleaseWait(),d.dt&&d.dt.draw(d.redrawType);d.parentLib&&d.parentLib.dt&&"function"==typeof d.parentLib.dt.draw&&d.parentLib.dt.draw(d.redrawType)},d;function f(t){var e;return"function"==typeof t.callback?(e=t.callback,function(){e(this)}):d.fnNull}}
